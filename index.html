<!doctype html>
<html lang="en">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Disclosures</title>
<main id="app" style="max-width:880px;margin:32px auto;padding:0 16px;font:16px/1.5 system-ui,Segoe UI,Roboto,Arial,sans-serif">
  <h1 style="margin:0 0 8px">Company Disclosures</h1>
  <p style="margin:0 0 16px;color:#666">Most recent first.</p>
  <section id="notice" style="display:none;padding:12px;border:1px solid #ddd;border-radius:12px"></section>
  <section id="list"></section>
</main>
<script>
(async () => {
  const $list = document.getElementById('list');
  const $notice = document.getElementById('notice');

  function show(msg){
    $notice.textContent = msg;
    $notice.style.display = 'block';
  }

  try {
    const res = await fetch('disclosures.json?ts=' + Date.now(), { cache: 'no-store' });
    if (!res.ok) throw new Error('HTTP '+res.status);
    const items = await res.json();

    if (!Array.isArray(items) || items.length === 0) {
      show('No disclosures are available yet.');
      return;
    }

    $list.innerHTML = items.map(i => `
      <article style="border:1px solid #ddd;border-radius:12px;padding:16px;margin:0 0 12px">
        <h3 style="margin:0 0 6px;font-size:1.05rem">
          ${i.link ? `<a href="${i.link}" target="_blank" rel="noopener noreferrer">${i.title}</a>` : i.title}
        </h3>
        <time datetime="${i.date}" style="color:#666;font-size:.95rem">
          ${new Date(i.date+'T00:00:00').toLocaleDateString(undefined,{year:'numeric',month:'long',day:'numeric'})}
        </time>
        ${i.description ? `<p style="margin:6px 0 0">${i.description}</p>` : ``}
      </article>
    `).join('');
  } catch (e) {
    console.error(e);
    show('There was a problem loading disclosures. Try again later.');
  }
})();
</script>
